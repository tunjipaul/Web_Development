<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal Expense Tracker</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      body {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        background: #f7f7f7;
        display: flex;
        justify-content: center;
        padding: 20px;
        margin: 0;
      }

      .container {
        width: 95%;
        max-width: 600px;
        background: rgb(181, 134, 134);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px #ccc;
      }

      h1,
      h2 {
        text-align: center;
      }

      form,
      .budget-section,
      .filter {
        display: flex;
        gap: 10px;
        margin: 10px 0;
        flex-wrap: wrap;
      }

      input,
      select,
      button {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
        flex: 1;
      }

      button {
        background: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 600;
      }

      button:hover {
        background-color: #0b440c;
        color: black;
      }
      button:focus {
        border: 1px solid yellow;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        border: 2px solid rgb(72, 52, 52);
      }

      th,
      td {
        padding: 8px;
        border: 1px solid #a11c1c;
        text-align: center;
      }

      .food {
        background: orange;
        color: white;
      }

      .transport {
        background: blue;
        color: white;
      }

      .entertainment {
        background: purple;
        color: white;
      }

      .education {
        background: green;
        color: white;
      }

      .other {
        background: gray;
        color: white;
      }

      #alert {
        text-align: center;
        color: red;
        font-weight: bold;
      }

      @media (max-width: 600px) {
        .container {
          padding: 10px;
        }

        input,
        select,
        button {
          flex: 100%;
          font-size: 14px;
        }

        th,
        td {
          font-size: 12px;
          padding: 6px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1><i class="fa-brands fa-cash-app"></i>Personal Expense Tracker</h1>

      <div class="budget-section">
        <input
          type="number"
          id="budget"
          placeholder="Set Monthly Budget in naira"
        />
        <button onclick="setBudget()">Set Budget</button>
        <p id="budget-info"></p>
      </div>

      <h2>Total Spent: <span id="total">N0.00</span></h2>
      <p id="alert"></p>

      <form id="expense-form">
        <input type="text" id="name" placeholder="Expense Name" required />
        <input type="number" id="amount" placeholder="Amount" required />
        <select id="category" required>
          <option value="">Select Category</option>
          <option value="Food">Food</option>
          <option value="Transport">Transport</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Education">Education</option>
          <option value="Other">Other</option>
        </select>
        <input type="date" id="date" required />
        <button type="submit">Add Expense</button>
      </form>

      <div class="filter">
        <select id="filter" onchange="filterExpenses()">
          <option value="All">All Categories</option>
          <option value="Food">Food</option>
          <option value="Transport">Transport</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Education">Education</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Amount (â‚¦)</th>
            <th>Category</th>
            <th>Date</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="expense-list"></tbody>
      </table>
    </div>

    <script>
      let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
      let budget = localStorage.getItem("budget") || 0;

      document.getElementById("budget-info").textContent =
        budget > 0 ? `Budget: N${Number(budget).toLocaleString()}` : "";
      document
        .getElementById("expense-form")
        .addEventListener("submit", addExpense);
      displayExpenses(expenses);
      updateTotal();

      function addExpense(e) {
        e.preventDefault();
        const name = document.getElementById("name").value.trim();
        const amount = Number(document.getElementById("amount").value);
        const category = document.getElementById("category").value;
        const date = document.getElementById("date").value;

        if (!name || !amount || !category || !date) return;

        const expense = { id: Date.now(), name, amount, category, date };
        expenses.push(expense);
        localStorage.setItem("expenses", JSON.stringify(expenses));
        document.getElementById("expense-form").reset();
        displayExpenses(expenses);
        updateTotal();
      }

      function displayExpenses(list) {
        const table = document.getElementById("expense-list");
        table.innerHTML = "";
        list.forEach((exp) => {
          const row = document.createElement("tr");
          const catClass = exp.category.toLowerCase();
          row.innerHTML = `
          <td>${exp.name}</td>
          <td>N${exp.amount.toLocaleString()}</td>
          <td class="${catClass}">${exp.category}</td>
          <td>${exp.date}</td>
          <td><button onclick="deleteExpense(${exp.id})">Delete</button></td>
        `;
          table.appendChild(row);
        });
      }

      function deleteExpense(id) {
        expenses = expenses.filter((exp) => exp.id !== id);
        localStorage.setItem("expenses", JSON.stringify(expenses));
        displayExpenses(expenses);
        updateTotal();
      }

      function updateTotal() {
        const total = expenses.reduce((sum, exp) => sum + exp.amount, 0);
        document.getElementById(
          "total"
        ).textContent = `N${total.toLocaleString()}`;
        checkBudgetAlert(total);
      }

      function setBudget() {
        budget = Number(document.getElementById("budget").value);
        if (budget > 0) {
          localStorage.setItem("budget", budget);
          document.getElementById(
            "budget-info"
          ).textContent = `Budget: N${budget.toLocaleString()}`;
          updateTotal();
        }
      }

      function checkBudgetAlert(total) {
        const alert = document.getElementById("alert");
        if (budget > 0 && total > 0.8 * budget) {
          alert.textContent = " Warning: You have exceeded 80% of your budget!";
        } else {
          alert.textContent = "";
        }
      }

      function filterExpenses() {
        const filter = document.getElementById("filter").value;
        if (filter === "All") {
          displayExpenses(expenses);
          updateTotal();
        } else {
          const filtered = expenses.filter((exp) => exp.category === filter);
          displayExpenses(filtered);
          const filteredTotal = filtered.reduce(
            (sum, exp) => sum + exp.amount,
            0
          );
          document.getElementById(
            "total"
          ).textContent = `N${filteredTotal.toLocaleString()}`;
          checkBudgetAlert(filteredTotal);
        }
      }
      displayExpenses(list);
    </script>
  </body>
</html>
